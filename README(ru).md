# Работа #

### GUI версия ###

* При запуске происходит подключение к FTDI, чтение десктриптора.

* Для теста сначала требуется прошить ПЛИС через 'Program FPGA':

* Если в FTDI корректный дескриптор, то файл прошивки выбирается автоматически исходя из записанного дескриптора 
(CL120 или CL080), в этом случае выбор 'Cyclone LEs:' игнорируется и выставится в соответствии с дескриптором.

* Если в FTDI некорректный дескриптор (при запуске в поле 'FTDI description:' будет 'Wrong descriptor'), файл прошивки и
то что будет записано в FTDI берется из 'Cyclone LEs:'.

* Если по ошибке был записан неверный дескриптор (для CL120 был записан CL080 и наоборот), то можно в FTDI записать
нужный дескриптор принудительно через 'Force prog FTDI' и выбрать нужный через 'Cyclone LEs:'.

* Выбор 'FTDI data width:' (FT600/FT601) требуется производить вручную всегда.

* После успешного программирования ПЛИС, считается версия и дата прошивки ПЛИС в поля 'Firmware ver/date:'.

* Далее требуется запустить тест 'Start test'.

* Основная информация об ошибках и возможных причинах выводится в основном окне, а в 'show log' выводится цепочка
вызовов функций и массив записанных в ПЛИС тестовых данных, при ошибке теста выводятся битые данные в формате 
'что было отправлено - что пришло' в HEX коде.

### Консольная версия ###

* Ключи: порядок и регистр не важен, могут быть заданы один или два ключа, по умолчанию при запуске без параметров используется FT601 и CL080.
* Вариант CL120 и FT600 не используется - заменится один из параметров.
* Вся информация о работе и тестовых данных пишется в 'log' файл, при ошибке теста записываются битые данные в формате 'что было отправлено - что пришло' в HEX коде.
***
	Выбор FPGA: -CL120 или -CL080
	Выбор FTDI: -FT600 или -FT601
***

# Комментарии #

### Компиляция verilog ###

* Через tcl 'usb_test' - обновятся 'rbf' всех ревизий.
* При копмиляции отдельных ревизий - перед запуском выполнится tcl 'pre_usb_test'.

### Замечания ###

* 'Build number' в файле 'defines' один на все 'rbf', т.е. при запуске компиляции всех ревизий - 'Build number' инкрементируется для каждого отдельно и будет у всех 'rbf' разный.
* Если прошить ПЛИС удалось не с первого раза, то тест на первой итерации может дать ошибку, потому что в буфере FTDI мусор, поэтому тест запускается несколько раз.